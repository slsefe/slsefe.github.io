<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>node.js是什么</title>
    <link href="/2023/10/02/nodejs%E6%98%AF%E4%BB%80%E4%B9%88/"/>
    <url>/2023/10/02/nodejs%E6%98%AF%E4%BB%80%E4%B9%88/</url>
    
    <content type="html"><![CDATA[<p>[TOC]</p><h3 id="什么是node-js"><a href="#什么是node-js" class="headerlink" title="什么是node.js"></a>什么是node.js</h3><p>根据官方介绍，<strong>node.js是一个开源的，跨平台的 JavaScript 运行时环境。</strong></p><p><strong>开源</strong>和<strong>跨平台</strong>都比较好理解，那么什么是<strong>运行时环境</strong>？</p><p>首先，所有编程语言都有其运行时环境，编程语言的运行时环境指的是：用户可以执行以该语言编写的代码的任何环境，该环境提供了执行代码所需的所有工具和资源。</p><p>而 node.js 正是针对 JavaScript 这一编程语言的一种运行时环境。</p><p>关于 node.js，有以下几点需要澄清：</p><ul><li>node.js不是一种编程语言</li><li>node.js不是一个 JavaScript 库</li><li>node.js不是一个 JavaScript 框架</li></ul><h3 id="为什么要有node-js"><a href="#为什么要有node-js" class="headerlink" title="为什么要有node.js"></a>为什么要有node.js</h3><p>据 node.js 的作者所说，之所以创造node.js是为了实现一种高性能的 web 服务器，充分利用事件机制和异步IO模型的优越性。而选择使用 javascript语言只是因为其本身不支持IO以及广泛的用户群体。</p><h3 id="node-js特点"><a href="#node-js特点" class="headerlink" title="node.js特点"></a>node.js特点</h3><p>作为一个异步事件驱动的JavaScript运行时，Node.js旨在构建可扩展的网络应用程序。</p><p>对于目前常用的基于操作系统线程的并发模型来说，基于线程的网络相对来说效率很低，而且很难使用。此外，Node.js的用户不必担心进程死锁，因为没有锁。Node.js中几乎没有函数直接执行I&#x2F;O，所以进程永远不会阻塞，除非使用Node.js标准库的同步方法执行I&#x2F;O。因为没有阻塞，所以在Node.js中开发可扩展的系统是非常合理的。</p><p>Node.js在设计上类似于Ruby的Event Machine和Python的Twisted等系统，并受到它们的影响。Node.js进一步使用了事件模型。它将事件循环呈现为运行时构造而不是库。在其他系统中，总是有一个阻塞调用来启动事件循环。通常，行为是通过回调来定义的，而在结束时，服务器是通过像EventMachine::run()这样的阻塞调用来启动的。在Node.js中，没有这样的start-the-event-loop调用。Node.js只是在执行输入脚本后进入事件循环。当没有回调函数要执行时，Node.js退出事件循环。这种行为类似于浏览器的JavaScript——事件循环对用户是隐藏的。</p><p>HTTP是Node.js中的一等公民，在设计时考虑了流和低延迟。这使得Node.js非常适合作为web库或框架的基础。</p><p>Node.js被设计成没有线程并不意味着你不能在你的环境中利用多核。子进程可以通过使用我们的child_process.fork() API来生成，并且被设计为易于通信。构建在相同接口之上的是集群模块，它允许您在进程之间共享套接字，从而在多个CPU核心上实现负载平衡。</p><h3 id="如何安装node-js"><a href="#如何安装node-js" class="headerlink" title="如何安装node.js"></a>如何安装node.js</h3><p><a href="https://dev.nodejs.cn/download/package-manager/">如何在不同的系统中安装 Node.js</a></p><p>nvm (node version manager)是一个用于管理 node.js 多个版本的工具，允许安装、卸载指定版本的node.js，并且可以很轻松地在多个版本之间进行切换。</p><p>对于 mac 系统来说，可以使用 homebrew 安装 nvm：<code>brew install nvm</code></p><p>nvm常用的命令：</p><ul><li><code>nvm --version</code>: 查看 nvm 的版本</li><li><code>nvm install &lt;version&gt;</code>: 下载安装指定版本的 node.js</li><li><code>nvm uninstall &lt;version&gt;</code>: 卸载指定版本的node.js</li><li><code>nvm current</code>: 查看当前激活的node.js版本</li><li><code>nvm list</code>: 查看当前环境所有的node.js版本</li><li><code>nvm use &lt;version&gt;</code>: 切换node.js的版本</li></ul><h3 id="如何使用node-js"><a href="#如何使用node-js" class="headerlink" title="如何使用node.js"></a>如何使用node.js</h3><p>安装 node.js 以后，我们可以在命令行输入 <code>node</code> 进入node 环境，然后就可以执行 js 语句了。是的，就和 python 一样！</p><p>对于某些复杂的语句，我们也可以首先编写一个<code>app.js</code>的文件，然后使用 <code>node app.js</code>命令来执行<code>app.js</code>脚本。是的，就和 python 一样！</p><h3 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h3><p>npm 是 node.js 的标准的包管理工具，后来也成为 javascript 中使用的工具。</p><p>对于项目根目录下的 <code>package.json</code> 文件，可以通过 <code>npm install</code> 命令来在 <code>node_modules</code> 安装项目所需的全部内容。</p>]]></content>
    
    
    
    <tags>
      
      <tag>node.js</tag>
      
      <tag>npm</tag>
      
      <tag>nvm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>openssl高版本导致mariaDB启动失败问题</title>
    <link href="/2023/10/02/openssl%E9%AB%98%E7%89%88%E6%9C%AC%E5%AF%BC%E8%87%B4mariaDB%E5%90%AF%E5%8A%A8%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/"/>
    <url>/2023/10/02/openssl%E9%AB%98%E7%89%88%E6%9C%AC%E5%AF%BC%E8%87%B4mariaDB%E5%90%AF%E5%8A%A8%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>我们的项目中使用了 mariaDB 作为集成测试中使用的数据库，在本地运行测试的时候会在内存中启动一个 mariaDB 服务作为数据库来进行测试，最近在更新了homebrew之后发现在运行测试的时候报了下面的错误：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">ch.vorburger.exec.ManagedProcessException: An error occurred <span class="hljs-keyword">while</span> installing the database<br>  at ch.vorburger.mariadb4j.DB.install(DB.java:141)<br>at ch.vorburger.mariadb4j.DB.newEmbeddedDB(DB.java:89)<br>...<br>Caused by: ch.vorburger.exec.ManagedProcessException: Program [/var/folders/gr/t26zps9n5rq76djs_2w9kdfc0000gn/T/MariaDB4j/base/bin/mysql_install_db, --datadir=/private/var/folders/gr/t26zps9n5rq76djs_2w9kdfc0000gn/T/MariaDB4j/data/3306, --tmpdir=/private/var/folders/gr/t26zps9n5rq76djs_2w9kdfc0000gn/T/MariaDB4j/tmp/3306, --basedir=/private/var/folders/gr/t26zps9n5rq76djs_2w9kdfc0000gn/T/MariaDB4j/base, --no-defaults, --force, --skip-name-resolve] (<span class="hljs-keyword">in</span> working directory /var/folders/gr/t26zps9n5rq76djs_2w9kdfc0000gn/T/MariaDB4j/base) failed, exitValue=1, last 100 lines of console:<br>dyld[28796]: Library not loaded: /usr/local/opt/openssl/lib/libssl.1.0.0.dylib<br>  Referenced from: &lt;807EF787-5964-392D-94E0-E301374CE806&gt; /private/var/folders/gr/t26zps9n5rq76djs_2w9kdfc0000gn/T/MariaDB4j/base/bin/my_print_defaults<br>  Reason: tried: <span class="hljs-string">&#x27;/usr/local/opt/openssl/lib/libssl.1.0.0.dylib&#x27;</span> (no such file), <span class="hljs-string">&#x27;/System/Volumes/Preboot/Cryptexes/OS/usr/local/opt/openssl/lib/libssl.1.0.0.dylib&#x27;</span> (no such file), <span class="hljs-string">&#x27;/usr/local/opt/openssl/lib/libssl.1.0.0.dylib&#x27;</span> (no such file), <span class="hljs-string">&#x27;/usr/local/lib/libssl.1.0.0.dylib&#x27;</span> (no such file), <span class="hljs-string">&#x27;/usr/lib/libssl.1.0.0.dylib&#x27;</span> (no such file, not <span class="hljs-keyword">in</span> dyld cache)<br>Installing MariaDB/MySQL system tables <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;/private/var/folders/gr/t26zps9n5rq76djs_2w9kdfc0000gn/T/MariaDB4j/data/3306&#x27;</span> ...<br>dyld[28822]: Library not loaded: /usr/local/opt/openssl/lib/libssl.1.0.0.dylib<br>  Referenced from: &lt;46DF14A9-48CB-3FF1-83B5-0E8E9446546C&gt; /private/var/folders/gr/t26zps9n5rq76djs_2w9kdfc0000gn/T/MariaDB4j/base/bin/mysqld<br>  Reason: tried: <span class="hljs-string">&#x27;/usr/local/opt/openssl/lib/libssl.1.0.0.dylib&#x27;</span> (no such file), <span class="hljs-string">&#x27;/System/Volumes/Preboot/Cryptexes/OS/usr/local/opt/openssl/lib/libssl.1.0.0.dylib&#x27;</span> (no such file), <span class="hljs-string">&#x27;/usr/local/opt/openssl/lib/libssl.1.0.0.dylib&#x27;</span> (no such file), <span class="hljs-string">&#x27;/usr/local/lib/libssl.1.0.0.dylib&#x27;</span> (no such file), <span class="hljs-string">&#x27;/usr/lib/libssl.1.0.0.dylib&#x27;</span> (no such file, not <span class="hljs-keyword">in</span> dyld cache)<br>/var/folders/gr/t26zps9n5rq76djs_2w9kdfc0000gn/T/MariaDB4j/base/bin/mysql_install_db: line 454: 28822 Abort <span class="hljs-built_in">trap</span>: 6           <span class="hljs-string">&quot;<span class="hljs-variable">$mysqld_bootstrap</span>&quot;</span> <span class="hljs-variable">$defaults</span> <span class="hljs-string">&quot;<span class="hljs-variable">$mysqld_opt</span>&quot;</span> --bootstrap <span class="hljs-variable">$silent_startup</span> <span class="hljs-string">&quot;--basedir=<span class="hljs-variable">$basedir</span>&quot;</span> <span class="hljs-string">&quot;--datadir=<span class="hljs-variable">$ldata</span>&quot;</span> --log-warnings=0 --enforce-storage-engine=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-variable">$args</span> --max_allowed_packet=8M --net_buffer_length=16K<br></code></pre></td></tr></table></figure><p>经过查看报错信息，可以分析得到找不到位于<code>/usr/local/opt/openssl/lib/libssl.1.0.0.dylib</code>路径的文件，再结合本地执行<code>which openssl</code>的结果可以推测，是在homebrew更新的时候自动升级了openssl的版本导致的报错。</p><h3 id="修复方式"><a href="#修复方式" class="headerlink" title="修复方式"></a>修复方式</h3><p>第一步，下载低版本的openssl</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">brew install rbenv/tap/openssl@1.0<br></code></pre></td></tr></table></figure><p>第二步，将第一步下载的低版本openssl和<code>/usr/local/opt/openssl</code>路径进行链接</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ln</span> -sfn /usr/local/Cellar/openssl@1.0/1.0.2t /usr/local/opt/openssl<br></code></pre></td></tr></table></figure><p>第三步，验证openssl版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">which</span> openssl<br></code></pre></td></tr></table></figure><p>如果看到使用的openssl已经指向了<code>/usr/local/opt/openssl@1.0/bin/openssl</code>，则说明已经切换成功。</p>]]></content>
    
    
    
    <tags>
      
      <tag>openssl</tag>
      
      <tag>mariaDB</tag>
      
      <tag>问题排查</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>使用 Docker 安装 MySQL8</title>
    <link href="/2023/09/23/%E4%BD%BF%E7%94%A8docker%E5%AE%89%E8%A3%85MySQL8/"/>
    <url>/2023/09/23/%E4%BD%BF%E7%94%A8docker%E5%AE%89%E8%A3%85MySQL8/</url>
    
    <content type="html"><![CDATA[<h1 id="使用-Docker-安装-MySQL8"><a href="#使用-Docker-安装-MySQL8" class="headerlink" title="使用 Docker 安装 MySQL8"></a>使用 Docker 安装 MySQL8</h1><p>可以在 docker hub搜索可用的 mysql 版本：<a href="https://hub.docker.com/_/mysql">https://hub.docker.com/_/mysql</a></p><p>假设我们选择8.1.0版本，就可以使用如下命令基于mysql:8.1.0来启动容器：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run --name mysql8.1 \<br>-p 3306:3306 \<br>-e MYSQL_ROOT_PASSWORD=password \<br>-d mysql:8.1.0<br></code></pre></td></tr></table></figure><p>参数解析：</p><ul><li><code>--name mysql8.1</code>指定启动的容器名称，必须指定</li><li><code>-p 3306:3306</code>将容器的 3306 端口暴露给主机的 3306 端口</li><li><code>-e</code>用来指定环境变量 </li><li><code>-d</code>表示在后台启动容器，并返回容器ID</li><li><code>mysql:8.1.0</code>是我们指定的镜像</li></ul><p>docker run命令的详细介绍可以使用<code>docker run --help</code>命令查看。</p><p>如果镜像在本地不存在，会先从 docker hub拉取镜像到本地，然后基于镜像启动容器。</p><p><img src="/../images/image-20230819230848131.png" alt="拉取镜像并运行"></p><p>然后就可以使用<code>docker images</code>查看拉取的镜像：</p><p><img src="/../images/image-20230819212453893.png" alt="查看镜像"></p><p>使用<code>docker ps</code>查看已启动的容器：</p><p><img src="/../images/image-20230819230806609.png" alt="查看已运行容器"></p><p>如果我们想要使用命令行连接到启动的mysql，一种方式是使用客户端（比如 navicat、datagrip）来连接，另一种方式是使用命令行来连接。首先进入到容器中：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker <span class="hljs-built_in">exec</span> -it mysql8.1 bash<br></code></pre></td></tr></table></figure><p>然后使用如下命令登录mysql：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mysql -u root -p<br></code></pre></td></tr></table></figure><p>然后根据提示输入密码即可。</p><p>如果要退出 mysql 使用 <code>exit</code> 即可，退出容器的话也是<code>exit</code>。</p><p>mysql 启动的时候使用-d参数指定了在后台启动，如果要看日志的话执行如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker logs mysql8.1<br></code></pre></td></tr></table></figure><p>最后不再使用的时候可以使用<code>docker stop [container-id | container-name]</code>停止容器：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker stop mysql8.1<br></code></pre></td></tr></table></figure><p>删除容器的话可以使用<code>docker rm [container-id | container-name]</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker <span class="hljs-built_in">rm</span> mysql8.1<br></code></pre></td></tr></table></figure><p>如果要永久删除镜像的话可以使用<code>docker rmi [image:tag | image-id]</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker rmi mysql:8.1.0<br></code></pre></td></tr></table></figure><h3 id="使用自定义配置启动mysql"><a href="#使用自定义配置启动mysql" class="headerlink" title="使用自定义配置启动mysql"></a>使用自定义配置启动mysql</h3><p>MySQL的默认配置文件是<code>/etc/mysql/my.cnf</code>文件，如果想要自定义配置，可以参考：<a href="https://dev.mysql.com/doc/refman/8.1/en/server-system-variables.html%E3%80%82">https://dev.mysql.com/doc/refman/8.1/en/server-system-variables.html。</a></p><p>当然可以在容器启动的时候指定新的<code>cnf</code>文件来覆盖默认配置文件。</p><p>在<code>~/env</code>路径下创建配置文件<code>mysql.cnf</code>：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># For advice on how to change settings please see</span><br><span class="hljs-comment"># http://dev.mysql.com/doc/refman/8.1/en/server-configuration-defaults.html</span><br><br><span class="hljs-attr">[mysqld]</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Remove leading # and set to the amount of RAM for the most important data</span><br><span class="hljs-comment"># cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.</span><br><span class="hljs-comment"># innodb_buffer_pool_size = 128M</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Remove leading # to turn on a very important data integrity option: logging</span><br><span class="hljs-comment"># changes to the binary log between backups.</span><br><span class="hljs-comment"># log_bin</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Remove leading # to set options mainly useful for reporting servers.</span><br><span class="hljs-comment"># The server defaults are faster for transactions and fast SELECTs.</span><br><span class="hljs-comment"># Adjust sizes as needed, experiment to find the optimal values.</span><br><span class="hljs-comment"># join_buffer_size = 128M</span><br><span class="hljs-comment"># sort_buffer_size = 2M</span><br><span class="hljs-comment"># read_rnd_buffer_size = 2M</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># Remove leading # to revert to previous value for default_authentication_plugin,</span><br><span class="hljs-comment"># this will increase compatibility with older clients. For background, see:</span><br><span class="hljs-comment"># https://dev.mysql.com/doc/refman/8.1/en/server-system-variables.html#sysvar_default_authentication_plugin</span><br><span class="hljs-comment"># default-authentication-plugin=mysql_native_password</span><br><span class="hljs-attr">skip-host-cache</span><br><span class="hljs-attr">skip-name-resolve</span><br><span class="hljs-attr">datadir</span>=<span class="hljs-string">/var/lib/mysql</span><br><span class="hljs-attr">socket</span>=<span class="hljs-string">/var/run/mysqld/mysqld.sock</span><br><span class="hljs-attr">secure-file-priv</span>=<span class="hljs-string">/var/lib/mysql-files</span><br><span class="hljs-attr">user</span>=<span class="hljs-string">mysql</span><br><br><span class="hljs-attr">pid-file</span>=<span class="hljs-string">/var/run/mysqld/mysqld.pid</span><br><span class="hljs-attr">[client]</span><br><span class="hljs-attr">socket</span>=<span class="hljs-string">/var/run/mysqld/mysqld.sock</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">!includedir /etc/mysql/conf.d/</span><br></code></pre></td></tr></table></figure><p>使用配置文件启动：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run --name mysql8.1 \<br>-p 3306:3306 \<br>-v ~/env:/etc/mysql/conf.d \<br>-e MYSQL_ROOT_PASSWORD=password \<br>-d mysql:8.1.0<br></code></pre></td></tr></table></figure><p>其中<code>-v ~/env/mysql.cnf:/etc/mysql/conf.d/mysql.cnf</code>指定将主机的配置文件挂载到容器的<code>/etc/mysql/conf.d</code>路径下，这样容器启动的时候将会组合<code>/etc/mysql/my.cnf</code>和<code>/etc/mysql/conf.d/mysql.cnf</code>两个配置文件。</p><p>如果只有少数几个配置项需要覆盖，也可以在启动容器的命令中以<code>--key=value</code>的形式指定，这样就不用使用cnf文件了：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run --name mysql8.1 \<br>-p 3306:3306 \<br>-e MYSQL_ROOT_PASSWORD=password \<br>-d mysql:8.1.0 \<br>--character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci<br></code></pre></td></tr></table></figure><h3 id="配置-mysql-的数据存储位置"><a href="#配置-mysql-的数据存储位置" class="headerlink" title="配置 mysql 的数据存储位置"></a>配置 mysql 的数据存储位置</h3><p>在 docker 中运行的 mysql 的数据存放在哪里呢？在容器中存放在<code>/var/lib/mysql</code>路径下，对应到主机上在什么路径下呢？</p><p>默认情况下，Docker将数据库文件写入主机上的磁盘来管理数据库数据，这样带来的缺点是：在主机系统上运行的应用程序很难找到这些文件。</p><p>我们可以在主机上创建一个数据目录，并将其挂载到容器内部的<code>/var/lib/mysql</code>路径。</p><p>首先在主机上创建一个数据目录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> home<br><span class="hljs-built_in">mkdir</span> /mysql8/data<br></code></pre></td></tr></table></figure><p>然后在容器启动的时候进行挂载：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run --name mysql8.1 \<br>-p 3306:3306 \<br>-v /home/mysql8/data:/var/lib/mysql \<br>-v /home/mysql8/config:/etc/mysql/conf.d  \<br>-v /home/mysql8/logs:/logs \<br>-e MYSQL_ROOT_PASSWORD=password \<br>-d mysql:8.1.0<br></code></pre></td></tr></table></figure><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul><li><a href="https://hub.docker.com/_/mysql">https://hub.docker.com/_/mysql</a></li><li><a href="https://www.runoob.com/docker/docker-install-mysql.html">https://www.runoob.com/docker/docker-install-mysql.html</a></li><li><a href="https://dev.mysql.com/doc/mysql-installer/en/">https://dev.mysql.com/doc/mysql-installer/en/</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>使用Github+Hexo搭建个人博客</title>
    <link href="/2023/09/23/%E4%BD%BF%E7%94%A8Github+Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    <url>/2023/09/23/%E4%BD%BF%E7%94%A8Github+Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
    
    <content type="html"><![CDATA[<h1 id="使用Github-Hexo搭建个人博客"><a href="#使用Github-Hexo搭建个人博客" class="headerlink" title="使用Github+Hexo搭建个人博客"></a>使用Github+Hexo搭建个人博客</h1><h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><p>搭建博客有下面这些前提条件：</p><ul><li>安装 git，并且已经配置 ssh</li><li>安装 npm</li><li>安装 node.js</li></ul><p>可以通过下面命令查看是否满足条件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm -v<br>node -v<br>git -v<br></code></pre></td></tr></table></figure><p>其中 node 的版本要求是 10.</p><h3 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h3><p>hexo是什么？一个快速，简单和强大的博客框架。</p><p>首先使用 npm 安装 hexo：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -g hexo-cli<br></code></pre></td></tr></table></figure><p>安装成功后我们需要初始化一个文件夹用来存放相关的文件，选择文件夹位置，执行初始化：（这里我在当前路径下进行初始化，文件夹的名称为blog）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo init blog<br></code></pre></td></tr></table></figure><p>后续的所有操作都需要在该文件夹下，首先切换到该文件夹下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> blog<br></code></pre></td></tr></table></figure><p>然后开始生成静态文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo generate<br></code></pre></td></tr></table></figure><p>然后在本地启动服务：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo server<br></code></pre></td></tr></table></figure><p>然后就可以在<code>http://127.0.0.1:4000</code>地址访问博客了。</p><h3 id="部署博客到Github-Pages"><a href="#部署博客到Github-Pages" class="headerlink" title="部署博客到Github Pages"></a>部署博客到Github Pages</h3><p>在 github 上创建一个新的 repository，命名为：<code>你的用户名.github.io</code>。</p><p>在 blog 目录下安装 hexo 扩展：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> blog<br>npm install hexo-deployer-git --save<br></code></pre></td></tr></table></figure><p>然后修改<code>_config.yml</code>配置文件中的部署信息：（位于配置文件末尾）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>  <span class="hljs-attr">repo:</span> <span class="hljs-string">git@github.com:你的用户名/你的用户名.github.io.git</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">master</span><br></code></pre></td></tr></table></figure><p>修改完成之后，就可以使用 hexo命令将博客部署到 github 上了：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo generate<br>hexo deploy<br></code></pre></td></tr></table></figure><p>执行完成之后，就可以在<code>你的用户名.github.io</code>访问博客了。</p><h3 id="配置自定义域名（可选）"><a href="#配置自定义域名（可选）" class="headerlink" title="配置自定义域名（可选）"></a>配置自定义域名（可选）</h3><p>虽然 github pages 已经提供了公网可访问的路径<code>你的用户名.github.io</code>，但是也支持绑定特定的域名，可以在 github pages 页面的<code>custom domain</code>填入自己的域名。</p><h3 id="更改博客主题（可选）"><a href="#更改博客主题（可选）" class="headerlink" title="更改博客主题（可选）"></a>更改博客主题（可选）</h3><p>hexo 提供了默认的主题，但是我们也可以选择自己喜欢的主题。</p><p>Hexo所有的主题：<a href="https://hexo.io/themes/">https://hexo.io/themes/</a></p><h3 id="问题记录"><a href="#问题记录" class="headerlink" title="问题记录"></a>问题记录</h3><blockquote><p>  console.js:35</p><p>  throw new TypeError(‘Console expects a writable stream instance’);</p></blockquote><p>如果在使用 hexo 命令的时候出现上述错误，原因一般是由于 node.js 的版本过低导致的，要求 node.js 的大版本为10。</p><p>修复方式：</p><p><code>node --version</code> 查看 node.js版本，如果小于 10，则更新node.js版本：</p><h3 id="Hexo-常用命令"><a href="#Hexo-常用命令" class="headerlink" title="Hexo 常用命令"></a>Hexo 常用命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo new <span class="hljs-string">&quot;title&quot;</span>: 创建一篇新的文章<br>hexo clean: 清理缓存<br>hexo generate: 生成文件<br>hexo server: 本地启动服务<br>hexo deploy: 将服务部署到远端<br></code></pre></td></tr></table></figure><p>hexo 更多的命令可以通过执行<code>hexo help</code>来查看。</p><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul><li><a href="https://hexo.io/index.html">Hexo 官网</a></li><li><a href="https://nodejs.org/en/download/package-manager">使用包管理工具下载node</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>环境配置</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Github</tag>
      
      <tag>Hexo</tag>
      
      <tag>博客</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
